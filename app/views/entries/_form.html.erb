<main>
  <%= form_for(@entry, html: {class: 'edit-entry'}) do |f| %>

    <div class="entry form">
      <div id="muh">
        <% if @entry.photo == nil %>
          <%= image_tag "camera-2008479_960_720.png", id: "entry_image", style: "object-fit: cover; display: none" %>
        <% else %>
          <%= image_tag "/uploads/#{@entry.photo.to_s}", id: "entry_image", style: "object-fit: cover; display: none" %>
        <% end %>

        <%= f.file_field :photo, id: "fileUpload", accept: "image/*", style: "height: 0; overflow: hidden; display: none" %>
        <canvas id="canvas" style="width: 100%; max-width: 400px; margin: auto" height="300" onclick="chooseFile();"></canvas>
      </div>

      <script>
          function chooseFile() {
              $("#fileUpload").click();
          }
      </script>

      <div id="title">

        <div class="mdc-text-field text-field mdc-text-field--box mdc-text-field--upgraded mdc-ripple-upgraded">

          <%= f.text_field :title, class: 'mdc-text-field__input', placeholder: t('title'), required: true %>

          <div class="mdc-line-ripple"></div>
        </div>
      </div>

      <div style="display: flex; align-items: flex-end">
        <div id="categoryIcon" style="width: 56px; height: 56px; padding: 8px; border-radius: 10px"></div>

        <div class="mdc-select" style="margin-left: 16px">
          <select class="mdc-select__native-control" required="required" name="entry[category_id]" id="entry_category_id">

            <% unless @entry.category %>
              <option value="h" selected disabled hidden></option>
            <% end %>

            <% @categories.each do |category| %>

              <option
                value="<%= category.id %>"
                data-is-expense="<%= category.incomeExpense %>"
                <%= 'selected' if category == @entry.category %> >
                <%= category.name %>
              </option>

            <% end %>

          </select>

          <label for="entry_category_id" class="mdc-floating-label"><%= t 'choose_category' %></label>
          <div class="mdc-line-ripple"></div>
        </div>
      </div>

      <div class="container">

        <div class="d-flex justify-content-between money">

          <div class="p-2">
            <button class="mdc-fab secondary plus" id="signPlus" aria-label="Favorite">

              <i class="fas fa-plus"></i>

            </button>
          </div>

          <div class="p-2">
            <div class="mdc-text-field text-field mdc-text-field--box mdc-text-field--upgraded mdc-ripple-upgraded">

              <%= f.number_field :amount, placeholder: '0.0', min: 0, step: '0.01', id: 'value', class: 'mdc-text-field__input' %>

              <div class="mdc-line-ripple"></div>
            </div>
          </div>

          <div class="p-2">
            <button class="mdc-fab secondary" id="currency" aria-label="Plus">

              <i class="fas fas fa-euro-sign"></i>
            </button>
          </div>

        </div>
        <div class="row">
          <div class="col">

          </div>
        </div>
      </div>

<!--      <input id="ok" class="material-icons mdc-top-app-bar__navigation-icon" type="submit" value="done">-->
    </div>
  <% end %>
</main>
